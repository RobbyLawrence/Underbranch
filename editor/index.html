<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>LaTeX Editor</title>
        <!-- Remove base href to avoid path issues -->
        <link rel="icon" type="image/png" href="../underbranch.png" />
        <style>
            /* Theme variables */
            :root {
                --bg: #f5f5f5;
                --toolbar-bg: #2d3748;
                --toolbar-color: #ffffff;
                --btn-primary-bg: #4299e1;
                --btn-primary-hover: #3182ce;
                --btn-secondary-bg: #718096;
                --btn-secondary-hover: #4a5568;
                --border: #e2e8f0;
                --preview-bg: #ffffff;
                --muted: #718096;
                --text: #1a202c;
            }

            /* Dark theme overrides */
            [data-theme="dark"] {
                --bg: #0f1724;
                --toolbar-bg: #0b1220;
                --toolbar-color: #e6eef8;
                --btn-primary-bg: #2b6cb0;
                --btn-primary-hover: #2c5282;
                --btn-secondary-bg: #334155;
                --btn-secondary-hover: #1f2937;
                --border: #243240;
                --preview-bg: #071122;
                --muted: #94a3b8;
                --text: #e6eef8;
            }

            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family:
                    -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",
                    sans-serif;
                background-color: var(--bg);
                color: var(--text);
            }

            .app {
                height: 100vh;
                display: flex;
                flex-direction: column;
            }

            .toolbar {
                background: var(--toolbar-bg);
                color: var(--toolbar-color);
                padding: 12px 16px;
                display: flex;
                align-items: center;
                gap: 16px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
            }

            .toolbar h1 {
                font-size: 18px;
                font-weight: 600;
            }

            .toolbar-buttons {
                display: flex;
                gap: 8px;
                margin-left: auto;
            }

            /* viewmode-indicator removed for production look */

            /* Explicit split rules to ensure panes share space equally and
           avoid overlap (helps when Monaco or other editors don't
           immediately reflow). */
            .editor-pane.split {
                display: block;
                flex: 1 1 50%;
                min-width: 0; /* allow shrinking */
            }

            .preview-pane.split {
                display: block;
                flex: 1 1 50%;
                min-width: 0;
            }

            .btn {
                padding: 8px 12px;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                font-size: 14px;
                transition: background-color 0.2s;
            }

            .btn-primary {
                background: var(--btn-primary-bg);
                color: var(--toolbar-color);
            }

            .btn-primary:hover {
                background: var(--btn-primary-hover);
            }

            .btn-secondary {
                background: var(--btn-secondary-bg);
                color: var(--toolbar-color);
            }

            .btn-secondary:hover {
                background: var(--btn-secondary-hover);
            }

            .btn[disabled] {
                opacity: 0.6;
                cursor: not-allowed;
            }

            .editor-container {
                flex: 1;
                display: flex;
                overflow: hidden;
            }

            .editor-pane {
                flex: 1;
                border-right: 1px solid var(--border);
            }

            .preview-pane {
                flex: 1;
                background: var(--preview-bg);
                padding: 20px;
                overflow-y: auto;
            }

            .editor-pane.full {
                flex: 1;
                border-right: none;
            }

            .preview-pane.full {
                flex: 1;
            }

            /* When a pane is hidden we remove it from layout but keep it in
           the DOM so components (like Monaco) remain mounted. */
            .hidden {
                display: none !important;
            }

            #monaco-editor {
                height: 100%;
                width: 100%;
            }

            .preview-content {
                max-width: 800px;
                margin: 0 auto;
                line-height: 1.6;
            }

            .loading {
                display: flex;
                align-items: center;
                justify-content: center;
                height: 100%;
                color: var(--muted);
            }

            /* small transition for smoother theme switch */
            :root, [data-theme="dark"] {
                transition: background-color 200ms ease, color 200ms ease;
            }
        </style>
    </head>
    <body>
        <div id="root">
            <div class="loading">Loading LaTeX Editor...</div>
        </div>

        <!-- Socket.IO for real-time collaboration -->
        <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
        <!-- React and ReactDOM from CDN -->
        <script
            crossorigin
            src="https://unpkg.com/react@18/umd/react.development.js"
        ></script>
        <script
            crossorigin
            src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
        ></script>
        <!-- Monaco Editor -->
        <script src="https://unpkg.com/monaco-editor@0.44.0/min/vs/loader.js"></script>

        <!-- Our bundled JavaScript (includes Collaborative.js) -->
        <script src="dist/bundle.js"></script>
    </body>
</html>
