{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://underbranch-collaborative-editor/./src/App.js","webpack://underbranch-collaborative-editor/./src/Collaborative.js","webpack://underbranch-collaborative-editor/./src/LaTeXEditor.js","webpack://underbranch-collaborative-editor/./src/PreviewPane.js","webpack://underbranch-collaborative-editor/./src/Toolbar.js","webpack://underbranch-collaborative-editor/webpack/bootstrap","webpack://underbranch-collaborative-editor/webpack/runtime/compat get default export","webpack://underbranch-collaborative-editor/webpack/runtime/define property getters","webpack://underbranch-collaborative-editor/webpack/runtime/hasOwnProperty shorthand","webpack://underbranch-collaborative-editor/webpack/runtime/make namespace object","webpack://underbranch-collaborative-editor/./src/index.js"],"sourcesContent":["// Pull React hooks off the global React object. This file assumes React is\r\n// available globally (e.g. via a <script> tag or bundler that provides it).\r\nconst { useState, useEffect } = React;\r\n\r\n// Main application component. This is a small, non-JSX React component that\r\n// uses React.createElement to build the UI. It wires together three pieces:\r\n// - Toolbar: lets the user switch view modes and perform actions\r\n// - LaTeXEditor: an editor component for editing LaTeX source\r\n// - PreviewPane: renders the LaTeX source as HTML or a preview\r\nconst App = () => {\r\n    // latexCode holds the current LaTeX source the user is editing. We\r\n    // initialize it with a small sample document so the preview shows\r\n    // something on first load.\r\n    const [latexCode, setLatexCode] = useState(`\\\\documentclass{article}\r\n\\\\usepackage[utf8]{inputenc}\r\n\\\\title{My LaTeX Document}\r\n\\\\author{Author Name}\r\n\\\\date{\\\\today}\r\n\r\n\\\\begin{document}\r\n\r\n\\\\maketitle\r\n\r\n\\\\section{Introduction}\r\nThis is a sample LaTeX document. You can edit this text in the editor.\r\n\r\n\\\\section{Mathematical Equations}\r\nHere's a mathematical equation:\r\n\\\\begin{equation}\r\nE = mc^2\r\n\\\\end{equation}\r\n\r\nAnd an inline equation: $\\\\alpha + \\\\beta = \\\\gamma$\r\n\r\n\\\\subsection{More Examples}\r\n\\\\begin{itemize}\r\n\\\\item First item\r\n\\\\item Second item\r\n\\\\item Third item\r\n\\\\end{itemize}\r\n\r\n\\\\end{document}`);\r\n\r\n    // viewMode controls which panes are visible. Possible values:\r\n    // - 'editor'  -> only the editor is shown\r\n    // - 'preview' -> only the preview is shown\r\n    // - 'split'   -> both are shown side-by-side\r\n    const [viewMode, setViewMode] = useState('split'); // 'editor', 'preview', 'split'\r\n\r\n    // handleCodeChange is passed to the editor component. It receives the\r\n    // new text value and updates the latexCode state. We guard against\r\n    // undefined/null by falling back to an empty string.\r\n    const handleCodeChange = (value) => {\r\n        setLatexCode(value || '');\r\n    };\r\n\r\n    // Debug: log viewMode transitions so we can trace state changes while\r\n    // reproducing the issue in the browser console.\r\n    useEffect(() => {\r\n        console.log('[App] viewMode changed ->', viewMode);\r\n        // Also update the document title so the current mode is visible\r\n        // in the browser tab (easy to spot without opening devtools).\r\n        try {\r\n            document.title = `LaTeX Editor â€” ${viewMode}`;\r\n        } catch (e) {\r\n            // ignore (server side or non-browser env)\r\n        }\r\n        // Trigger a resize event to nudge layout systems (Monaco, CSS)\r\n        // to recompute sizes when the view mode changes.\r\n        try {\r\n            window.dispatchEvent(new Event('resize'));\r\n        } catch (e) {\r\n            // ignore in non-browser environments\r\n        }\r\n    }, [viewMode]);\r\n\r\n    // The UI layout is built with React.createElement calls instead of JSX.\r\n    // To avoid layout glitches when switching modes we render both panes\r\n    // consistently and toggle their visibility/size using explicit CSS\r\n    // class names: 'split', 'full', or 'hidden'. This prevents frequent\r\n    // unmount/remount of the editor which can cause Monaco/DOM layout issues.\r\n    const editorClass = viewMode === 'split' ? 'split' : (viewMode === 'editor' ? 'full' : 'hidden');\r\n    const previewClass = viewMode === 'split' ? 'split' : (viewMode === 'preview' ? 'full' : 'hidden');\r\n\r\n    const editorVisible = viewMode === 'split' || viewMode === 'editor';\r\n    const previewVisible = viewMode === 'split' || viewMode === 'preview';\r\n\r\n    return React.createElement('div', { className: 'app' },\r\n        React.createElement(Toolbar, {\r\n            viewMode: viewMode,\r\n            onViewModeChange: setViewMode,\r\n            latexCode: latexCode\r\n        }),\r\n\r\n        React.createElement('div', { className: `editor-container mode-${viewMode}` },\r\n            // Editor pane is always present but may be hidden via the\r\n            // 'hidden' class. This keeps Monaco mounted and stable.\r\n            React.createElement('div', {\r\n                className: `editor-pane ${editorClass}`\r\n            },\r\n                React.createElement(LaTeXEditor, {\r\n                    value: latexCode,\r\n                    onChange: handleCodeChange,\r\n                    isVisible: editorVisible\r\n                })\r\n            ),\r\n\r\n            // Preview pane is always present as well; it will be hidden\r\n            // when not in 'preview' or 'split' modes.\r\n            React.createElement('div', {\r\n                className: `preview-pane ${previewClass}`\r\n            },\r\n                React.createElement(PreviewPane, {\r\n                    latexCode: latexCode\r\n                })\r\n            )\r\n        )\r\n    );\r\n};\r\n\r\nexport default App;\r\n","// Collaborative features integration for the LaTeX Editor\r\n// This module handles real-time collaboration via Socket.IO\r\n\r\nclass Collaborative {\r\n    constructor() {\r\n        this.socket = null;\r\n        this.editor = null;\r\n        this.app = null;\r\n        this.users = [];\r\n        this.currentUser = null;\r\n        this.currentRoom = null;\r\n        this.isUpdatingFromRemote = false;\r\n        this.decorations = [];\r\n        \r\n        this.init();\r\n    }\r\n\r\n    async init() {\r\n        console.log('ðŸš€ Starting collaborative initialization...');\r\n        \r\n        // Wait for Socket.IO to be available\r\n        console.log('â³ Waiting for Socket.IO...');\r\n        await this.waitForSocketIO();\r\n        console.log('âœ… Socket.IO ready');\r\n        \r\n        // Initialize socket connection\r\n        console.log('ðŸ”Œ Initializing socket connection...');\r\n        this.initSocket();\r\n        \r\n        // Get user info and join\r\n        console.log('ðŸ‘¤ Getting user info...');\r\n        await this.getUserInfo();\r\n        \r\n        // Wait for the React app and Monaco editor\r\n        console.log('ðŸ“ Waiting for Monaco editor...');\r\n        await this.waitForEditor();\r\n        console.log('âœ… Monaco editor found!');\r\n        \r\n        // Setup collaborative features\r\n        console.log('ðŸŽ¯ Setting up collaboration...');\r\n        this.setupCollaboration();\r\n        \r\n        console.log('ðŸ¤ Collaborative features initialized!');\r\n    }\r\n\r\n    waitForSocketIO() {\r\n        return new Promise((resolve) => {\r\n            const checkSocketIO = () => {\r\n                if (window.io) {\r\n                    resolve();\r\n                } else {\r\n                    setTimeout(checkSocketIO, 100);\r\n                }\r\n            };\r\n            checkSocketIO();\r\n        });\r\n    }\r\n\r\n    initSocket() {\r\n        this.socket = io();\r\n        \r\n        this.socket.on('connect', () => {\r\n            console.log('ðŸ”Œ Connected to collaboration server');\r\n        });\r\n\r\n        this.socket.on('disconnect', () => {\r\n            console.log('ðŸ”Œ Disconnected from collaboration server');\r\n        });\r\n\r\n        this.socket.on('document-update', (data) => {\r\n            console.log('ðŸ“ Received document update from', data.userId);\r\n            this.handleRemoteUpdate(data);\r\n        });\r\n\r\n        this.socket.on('users-update', (users) => {\r\n            console.log('ðŸ‘¥ Users list updated:', users.length, 'users');\r\n            this.users = users;\r\n            this.updateUsersList();\r\n        });\r\n\r\n        this.socket.on('cursor-update', (data) => {\r\n            this.handleCursorUpdate(data);\r\n        });\r\n\r\n        this.socket.on('room-joined', (data) => {\r\n            console.log('ðŸ  Successfully joined room:', data.roomId);\r\n            this.currentRoom = data.roomId;\r\n            this.updateDocumentContent(data.content);\r\n            this.users = data.users;\r\n            this.updateUsersList();\r\n            \r\n            // Show success message\r\n            this.showMessage(`âœ… Joined room: ${data.roomId}${data.isPasswordProtected ? ' (password protected)' : ''}`, 'success');\r\n        });\r\n\r\n        this.socket.on('room-join-error', (data) => {\r\n            console.error('âŒ Failed to join room:', data.message);\r\n            \r\n            if (data.error === 'invalid-password') {\r\n                alert(`âŒ ${data.message}\\n\\nPlease try again.`);\r\n                setTimeout(() => this.promptForRoom(), 100);\r\n            } else if (data.error === 'room-not-found') {\r\n                const createRoom = confirm(`âŒ Room does not exist.\\n\\nWould you like to create it?`);\r\n                if (createRoom) {\r\n                    const password = prompt(`Set a password for the new room (or leave empty for no password):`);\r\n                    this.joinRoom(this.currentRoom, password, true);\r\n                } else {\r\n                    setTimeout(() => this.promptForRoom(), 100);\r\n                }\r\n            } else if (data.error === 'room-already-exists') {\r\n                alert(`âŒ ${data.message}`);\r\n                setTimeout(() => this.promptForRoom(), 100);\r\n            }\r\n        });\r\n\r\n        this.socket.on('room-check-result', (data) => {\r\n            if (data.exists) {\r\n                if (data.isPasswordProtected) {\r\n                    // Room exists and is password protected\r\n                    const password = prompt(`Room \"${data.roomId}\" exists and is password protected.\\nEnter password:`);\r\n                    this.joinRoom(data.roomId, password, false);\r\n                } else {\r\n                    // Room exists and is public\r\n                    this.joinRoom(data.roomId, null, false);\r\n                }\r\n            } else {\r\n                // Room doesn't exist - ask if they want to create it\r\n                const createRoom = confirm(`Room \"${data.roomId}\" doesn't exist.\\nWould you like to create it?`);\r\n                if (createRoom) {\r\n                    const password = prompt(`Set a password for the new room \"${data.roomId}\" (or leave empty for no password):`);\r\n                    this.joinRoom(data.roomId, password, true);\r\n                } else {\r\n                    setTimeout(() => this.promptForRoom(), 100);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    async getUserInfo() {\r\n        // Check if user info is stored in localStorage\r\n        let userName = localStorage.getItem('collaborativeUserName');\r\n        let userColor = localStorage.getItem('collaborativeUserColor');\r\n\r\n        if (!userName) {\r\n            userName = prompt('Enter your name for collaborative editing:') || `User ${Date.now()}`;\r\n            localStorage.setItem('collaborativeUserName', userName);\r\n        }\r\n\r\n        if (!userColor) {\r\n            userColor = this.getRandomColor();\r\n            localStorage.setItem('collaborativeUserColor', userColor);\r\n        }\r\n\r\n        this.currentUser = {\r\n            name: userName,\r\n            color: userColor\r\n        };\r\n\r\n        // Prompt for room\r\n        await this.promptForRoom();\r\n    }\r\n\r\n    async promptForRoom() {\r\n        const roomId = prompt('Enter room name to join (or leave empty for \"general\"):') || 'general';\r\n        \r\n        if (roomId === 'general') {\r\n            // General room is always accessible without password\r\n            this.joinRoom(roomId, null, true); // Always \"create\" general room to ensure it exists\r\n            return;\r\n        }\r\n        \r\n        // Check if room exists first\r\n        this.checkRoomExists(roomId);\r\n    }\r\n\r\n    checkRoomExists(roomId) {\r\n        console.log(`ðŸ” Checking if room \"${roomId}\" exists...`);\r\n        this.socket.emit('check-room', { roomId });\r\n    }\r\n\r\n    joinRoom(roomId, password, createRoom) {\r\n        this.currentRoom = roomId;\r\n        \r\n        this.socket.emit('join-room', {\r\n            roomId: roomId,\r\n            userData: this.currentUser,\r\n            password: password,\r\n            createRoom: createRoom\r\n        });\r\n    }\r\n\r\n    waitForEditor() {\r\n        return new Promise((resolve) => {\r\n            const checkEditor = () => {\r\n                console.log('ðŸ” Looking for Monaco editor...');\r\n                \r\n                // Look for Monaco editor in multiple ways\r\n                const editorElement = document.getElementById('monaco-editor');\r\n                console.log('ðŸ“ Editor element found:', !!editorElement);\r\n                \r\n                if (window.monaco) {\r\n                    console.log('âœ… Monaco global available');\r\n                    \r\n                    // Try to get editor from the element\r\n                    if (editorElement && editorElement._monacoEditor) {\r\n                        console.log('âœ… Found editor on element._monacoEditor');\r\n                        this.editor = editorElement._monacoEditor;\r\n                        resolve();\r\n                        return;\r\n                    }\r\n                    \r\n                    // Try to get all editors from Monaco\r\n                    const editors = window.monaco.editor.getEditors();\r\n                    if (editors.length > 0) {\r\n                        console.log('âœ… Found editor via monaco.editor.getEditors():', editors.length);\r\n                        this.editor = editors[0];\r\n                        resolve();\r\n                        return;\r\n                    }\r\n                } else {\r\n                    console.log('âŒ Monaco global not available yet');\r\n                }\r\n                \r\n                console.log('â³ Editor not ready yet, retrying...');\r\n                setTimeout(checkEditor, 500);\r\n            };\r\n            checkEditor();\r\n        });\r\n    }\r\n\r\n    setupCollaboration() {\r\n        if (!this.editor) {\r\n            console.error('âŒ Monaco editor not found');\r\n            return;\r\n        }\r\n\r\n        // Listen for local changes\r\n        this.editor.onDidChangeModelContent((e) => {\r\n            if (!this.isUpdatingFromRemote) {\r\n                const content = this.editor.getValue();\r\n                console.log('ðŸ“ Local change detected, broadcasting...', content.length, 'characters');\r\n                this.socket.emit('document-change', { \r\n                    content: content,\r\n                    changes: e.changes \r\n                });\r\n            } else {\r\n                console.log('ðŸ”„ Skipping broadcast - change from remote');\r\n            }\r\n        });\r\n\r\n        // Listen for cursor position changes\r\n        this.editor.onDidChangeCursorPosition((e) => {\r\n            this.socket.emit('cursor-update', {\r\n                lineNumber: e.position.lineNumber,\r\n                column: e.position.column\r\n            });\r\n        });\r\n\r\n        console.log('ðŸŽ¯ Editor event listeners setup complete');\r\n    }\r\n\r\n    updateDocumentContent(content) {\r\n        if (this.editor && this.editor.getValue() !== content) {\r\n            console.log('ðŸ”„ Updating editor content from remote...', content.length, 'characters');\r\n            this.isUpdatingFromRemote = true;\r\n            const position = this.editor.getPosition();\r\n            this.editor.setValue(content);\r\n            if (position) {\r\n                this.editor.setPosition(position);\r\n            }\r\n            this.isUpdatingFromRemote = false;\r\n            console.log('âœ… Editor content updated successfully');\r\n        } else {\r\n            console.log('â­ï¸ Content already up to date, skipping update');\r\n        }\r\n    }\r\n\r\n    handleRemoteUpdate(data) {\r\n        console.log('ðŸ“¥ Received remote update from', data.userId);\r\n        this.updateDocumentContent(data.content);\r\n    }\r\n\r\n    handleCursorUpdate(data) {\r\n        if (!this.editor) return;\r\n\r\n        // Remove old decorations for this user\r\n        const oldDecorations = this.decorations.filter(d => d.userId === data.userId);\r\n        if (oldDecorations.length > 0) {\r\n            this.editor.deltaDecorations(oldDecorations.map(d => d.id), []);\r\n        }\r\n\r\n        // Add new cursor decoration\r\n        const decoration = {\r\n            range: new monaco.Range(\r\n                data.cursor.lineNumber, \r\n                data.cursor.column, \r\n                data.cursor.lineNumber, \r\n                data.cursor.column + 1\r\n            ),\r\n            options: {\r\n                className: 'collaborative-cursor',\r\n                stickiness: monaco.editor.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\r\n                hoverMessage: { value: `${data.user.name}'s cursor` },\r\n                after: {\r\n                    content: `${data.user.name}`,\r\n                    inlineClassName: 'collaborative-cursor-label',\r\n                    color: data.user.color\r\n                }\r\n            }\r\n        };\r\n\r\n        const decorationIds = this.editor.deltaDecorations([], [decoration]);\r\n        \r\n        // Store decoration info\r\n        this.decorations = this.decorations.filter(d => d.userId !== data.userId);\r\n        this.decorations.push({\r\n            userId: data.userId,\r\n            id: decorationIds[0]\r\n        });\r\n    }\r\n\r\n    updateUsersList() {\r\n        // Create or update users list UI\r\n        this.createUsersListUI();\r\n    }\r\n\r\n    createUsersListUI() {\r\n        // Remove existing users list\r\n        const existingList = document.getElementById('collaborative-users');\r\n        if (existingList) {\r\n            existingList.remove();\r\n        }\r\n\r\n        // Create new users list\r\n        const usersList = document.createElement('div');\r\n        usersList.id = 'collaborative-users';\r\n        usersList.style.cssText = `\r\n            position: fixed;\r\n            top: 60px;\r\n            right: 20px;\r\n            background: white;\r\n            border: 1px solid #ddd;\r\n            border-radius: 8px;\r\n            padding: 12px;\r\n            box-shadow: 0 2px 10px rgba(0,0,0,0.1);\r\n            z-index: 1000;\r\n            max-width: 220px;\r\n        `;\r\n\r\n        // Room info\r\n        const roomInfo = document.createElement('div');\r\n        roomInfo.style.cssText = `\r\n            background: #f8f9fa;\r\n            padding: 8px;\r\n            border-radius: 4px;\r\n            margin-bottom: 12px;\r\n            border-left: 3px solid #4834D4;\r\n        `;\r\n        \r\n        const roomTitle = document.createElement('div');\r\n        roomTitle.textContent = `Room: ${this.currentRoom || 'Not connected'}`;\r\n        roomTitle.style.cssText = `\r\n            font-weight: bold;\r\n            color: #333;\r\n            font-size: 13px;\r\n            margin-bottom: 4px;\r\n        `;\r\n        \r\n        const switchButton = document.createElement('button');\r\n        switchButton.textContent = 'Switch Room';\r\n        switchButton.style.cssText = `\r\n            background: #4834D4;\r\n            color: white;\r\n            border: none;\r\n            padding: 4px 8px;\r\n            border-radius: 3px;\r\n            font-size: 11px;\r\n            cursor: pointer;\r\n        `;\r\n        switchButton.onclick = () => this.promptForRoom();\r\n        \r\n        roomInfo.appendChild(roomTitle);\r\n        roomInfo.appendChild(switchButton);\r\n        usersList.appendChild(roomInfo);\r\n\r\n        // Users title\r\n        const title = document.createElement('div');\r\n        title.textContent = `Online Users (${this.users.length})`;\r\n        title.style.cssText = `\r\n            font-weight: bold;\r\n            margin-bottom: 8px;\r\n            color: #333;\r\n            font-size: 14px;\r\n        `;\r\n        usersList.appendChild(title);\r\n\r\n        // Users list\r\n        this.users.forEach(user => {\r\n            const userElement = document.createElement('div');\r\n            userElement.style.cssText = `\r\n                display: flex;\r\n                align-items: center;\r\n                margin-bottom: 6px;\r\n                font-size: 13px;\r\n            `;\r\n\r\n            const colorDot = document.createElement('div');\r\n            colorDot.style.cssText = `\r\n                width: 12px;\r\n                height: 12px;\r\n                background-color: ${user.color};\r\n                border-radius: 50%;\r\n                margin-right: 8px;\r\n            `;\r\n\r\n            const nameElement = document.createElement('span');\r\n            nameElement.textContent = user.name;\r\n            nameElement.style.color = '#555';\r\n\r\n            userElement.appendChild(colorDot);\r\n            userElement.appendChild(nameElement);\r\n            usersList.appendChild(userElement);\r\n        });\r\n\r\n        document.body.appendChild(usersList);\r\n    }\r\n\r\n    getRandomColor() {\r\n        const colors = [\r\n            '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FECA57',\r\n            '#FF9FF3', '#54A0FF', '#5F27CD', '#00D2D3', '#FF9F43'\r\n        ];\r\n        return colors[Math.floor(Math.random() * colors.length)];\r\n    }\r\n\r\n    showMessage(message, type = 'info') {\r\n        // Create message element\r\n        const messageDiv = document.createElement('div');\r\n        messageDiv.textContent = message;\r\n        messageDiv.style.cssText = `\r\n            position: fixed;\r\n            top: 20px;\r\n            right: 20px;\r\n            padding: 12px 20px;\r\n            border-radius: 6px;\r\n            color: white;\r\n            font-weight: bold;\r\n            z-index: 10000;\r\n            max-width: 300px;\r\n            box-shadow: 0 4px 12px rgba(0,0,0,0.3);\r\n            background-color: ${type === 'success' ? '#10AC84' : type === 'error' ? '#EE5A24' : '#4834D4'};\r\n        `;\r\n        \r\n        document.body.appendChild(messageDiv);\r\n        \r\n        // Remove after 4 seconds\r\n        setTimeout(() => {\r\n            if (messageDiv.parentNode) {\r\n                messageDiv.parentNode.removeChild(messageDiv);\r\n            }\r\n        }, 4000);\r\n    }\r\n}\r\n\r\n// CSS for collaborative cursors\r\nconst style = document.createElement('style');\r\nstyle.textContent = `\r\n    .collaborative-cursor {\r\n        border-left: 2px solid !important;\r\n        background-color: rgba(255, 107, 107, 0.2) !important;\r\n    }\r\n    \r\n    .collaborative-cursor-label {\r\n        background-color: #FF6B6B;\r\n        color: white;\r\n        padding: 2px 6px;\r\n        border-radius: 3px;\r\n        font-size: 11px;\r\n        position: relative;\r\n        top: -20px;\r\n        white-space: nowrap;\r\n    }\r\n`;\r\ndocument.head.appendChild(style);\r\n\r\n// Initialize when DOM is ready\r\nif (document.readyState === 'loading') {\r\n    document.addEventListener('DOMContentLoaded', () => {\r\n        window.collaborative = new Collaborative();\r\n    });\r\n} else {\r\n    window.collaborative = new Collaborative();\r\n}\r\n\r\n// Make Collaborative available globally\r\nwindow.Collaborative = Collaborative;","const { useEffect, useRef } = React;\r\n\r\nconst LaTeXEditor = ({ value, onChange, isVisible = true }) => {\r\n    const editorRef = useRef(null);\r\n    const monacoRef = useRef(null);\r\n    const layoutTimeout = useRef(null);\r\n\r\n    useEffect(() => {\r\n        // Initialize Monaco Editor\r\n        if (window.require && !monacoRef.current) {\r\n            window.require.config({\r\n                paths: { vs: \"https://unpkg.com/monaco-editor@0.44.0/min/vs\" },\r\n            });\r\n\r\n            window.require([\"vs/editor/editor.main\"], () => {\r\n                if (editorRef.current && !monacoRef.current) {\r\n                    // Configure LaTeX language\r\n                    monaco.languages.register({ id: \"latex\" });\r\n\r\n                    // Define custom theme\r\n                    monaco.editor.defineTheme(\"underbranch-theme\", {\r\n                        base: \"vs\",\r\n                        inherit: true,\r\n                        rules: [\r\n                            { token: \"keyword\", foreground: \"B5632D\" },\r\n                            { token: \"string\", foreground: \"218721\" },\r\n                            {\r\n                                token: \"comment\",\r\n                                foreground: \"737373\",\r\n                                fontStyle: \"italic\",\r\n                            },\r\n                            { token: \"bracket\", foreground: \"505050\" },\r\n                        ],\r\n                        colors: {\r\n                            \"editor.background\": \"#FFFFFF\",\r\n                            \"editor.foreground\": \"#333333\",\r\n                            \"editor.lineHighlightBackground\": \"#F5F5F5\",\r\n                            \"editorCursor.foreground\": \"#B5632D\",\r\n                            \"editor.selectionBackground\": \"#E8D3C7\",\r\n                            \"editorLineNumber.foreground\": \"#999999\",\r\n                        },\r\n                    });\r\n\r\n                    // Syntax highlighting\r\n                    monaco.languages.setMonarchTokensProvider(\"latex\", {\r\n                        tokenizer: {\r\n                            root: [\r\n                                [/\\\\[a-zA-Z@]+/, \"keyword\"],\r\n                                [/\\\\begin\\{[^}]+\\}/, \"keyword\"],\r\n                                [/\\\\end\\{[^}]+\\}/, \"keyword\"],\r\n                                [/\\$.*?\\$/, \"string\"],\r\n                                [/\\\\\\(.*?\\\\\\)/, \"string\"],\r\n                                [/\\\\\\[.*?\\\\\\]/, \"string\"],\r\n                                [/%.*$/, \"comment\"],\r\n                                [/\\{/, \"bracket\"],\r\n                                [/\\}/, \"bracket\"],\r\n                            ],\r\n                        },\r\n                    });\r\n\r\n                    // LaTeX command definitions\r\n                    const latexCommands = [\r\n                        {\r\n                            command: \"begin\",\r\n                            insertText: \"begin{$0}\",\r\n                            documentation: \"Begin environment\",\r\n                        },\r\n                        {\r\n                            command: \"end\",\r\n                            insertText: \"end{$0}\",\r\n                            documentation: \"End environment\",\r\n                        },\r\n                        {\r\n                            command: \"textbf\",\r\n                            insertText: \"textbf{$0}\",\r\n                            documentation: \"Bold text\",\r\n                        },\r\n                        {\r\n                            command: \"textit\",\r\n                            insertText: \"textit{$0}\",\r\n                            documentation: \"Italic text\",\r\n                        },\r\n                        {\r\n                            command: \"underline\",\r\n                            insertText: \"underline{$0}\",\r\n                            documentation: \"Underline text\",\r\n                        },\r\n                        {\r\n                            command: \"section\",\r\n                            insertText: \"section{$0}\",\r\n                            documentation: \"Section\",\r\n                        },\r\n                        {\r\n                            command: \"subsection\",\r\n                            insertText: \"subsection{$0}\",\r\n                            documentation: \"Subsection\",\r\n                        },\r\n                        {\r\n                            command: \"subsubsection\",\r\n                            insertText: \"subsubsection{$0}\",\r\n                            documentation: \"Subsubsection\",\r\n                        },\r\n                        {\r\n                            command: \"chapter\",\r\n                            insertText: \"chapter{$0}\",\r\n                            documentation: \"Chapter\",\r\n                        },\r\n                        {\r\n                            command: \"title\",\r\n                            insertText: \"title{$0}\",\r\n                            documentation: \"Document title\",\r\n                        },\r\n                        {\r\n                            command: \"author\",\r\n                            insertText: \"author{$0}\",\r\n                            documentation: \"Document author\",\r\n                        },\r\n                        {\r\n                            command: \"date\",\r\n                            insertText: \"date{$0}\",\r\n                            documentation: \"Document date\",\r\n                        },\r\n                        {\r\n                            command: \"emph\",\r\n                            insertText: \"emph{$0}\",\r\n                            documentation: \"Emphasize text\",\r\n                        },\r\n                        {\r\n                            command: \"frac\",\r\n                            insertText: \"frac{$1}{$2}\",\r\n                            documentation: \"Fraction\",\r\n                        },\r\n                        {\r\n                            command: \"sqrt\",\r\n                            insertText: \"sqrt{$0}\",\r\n                            documentation: \"Square root\",\r\n                        },\r\n                    ];\r\n\r\n                    const latexEnvironments = [\r\n                        \"document\",\r\n                        \"equation\",\r\n                        \"align\",\r\n                        \"itemize\",\r\n                        \"enumerate\",\r\n                        \"figure\",\r\n                        \"table\",\r\n                        \"center\",\r\n                        \"abstract\",\r\n                    ];\r\n\r\n                    // Register completion provider for LaTeX commands\r\n                    monaco.languages.registerCompletionItemProvider(\"latex\", {\r\n                        triggerCharacters: [\"\\\\\", \"{\"],\r\n                        provideCompletionItems: (model, position) => {\r\n                            const lineContent = model.getLineContent(\r\n                                position.lineNumber,\r\n                            );\r\n                            const textBeforeCursor = lineContent.substring(\r\n                                0,\r\n                                position.column - 1,\r\n                            );\r\n\r\n                            // Command completions (after \\)\r\n                            const commandMatch =\r\n                                textBeforeCursor.match(/\\\\([a-zA-Z]*)$/);\r\n                            if (commandMatch) {\r\n                                const partialCommand = commandMatch[1];\r\n                                const textAfterCursor = lineContent.substring(\r\n                                    position.column - 1,\r\n                                );\r\n\r\n                                const suggestions = latexCommands\r\n                                    .filter((cmd) =>\r\n                                        cmd.command.startsWith(partialCommand),\r\n                                    )\r\n                                    .map((cmd) => {\r\n                                        // Check if cursor is inside braces and there's a closing brace\r\n                                        const hasOpenBrace = textBeforeCursor.match(/\\{[^}]*$/);\r\n                                        const hasClosingBrace = hasOpenBrace && textAfterCursor.startsWith('}');\r\n\r\n                                        // If we're inside braces with a closing brace, don't include it in insertText\r\n                                        let insertText = cmd.insertText;\r\n                                        let endColumn = position.column;\r\n\r\n                                        if (hasClosingBrace && insertText.includes('{')) {\r\n                                            // Remove the closing brace from commands like \"textbf{$0}\"\r\n                                            insertText = insertText.replace(/\\{([^}]*)\\}/, '{$1');\r\n                                            endColumn = position.column + 1; // Include the closing brace in replacement\r\n                                        }\r\n\r\n                                        return {\r\n                                            label: cmd.command,\r\n                                            kind: monaco.languages\r\n                                                .CompletionItemKind.Function,\r\n                                            insertText: insertText,\r\n                                            insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\r\n                                            documentation: cmd.documentation,\r\n                                            range: {\r\n                                                startLineNumber:\r\n                                                    position.lineNumber,\r\n                                                startColumn:\r\n                                                    position.column -\r\n                                                    partialCommand.length,\r\n                                                endLineNumber: position.lineNumber,\r\n                                                endColumn: endColumn,\r\n                                            },\r\n                                        };\r\n                                    });\r\n                                return { suggestions };\r\n                            }\r\n\r\n                            // Environment completions (after \\begin{)\r\n                            const beginMatch =\r\n                                textBeforeCursor.match(/\\\\begin\\{([^}]*)$/);\r\n                            if (beginMatch) {\r\n                                const partialEnv = beginMatch[1];\r\n                                const textAfterCursor = lineContent.substring(position.column - 1);\r\n\r\n                                // Check if there's already a closing brace after the cursor\r\n                                const hasClosingBrace = textAfterCursor.startsWith('}');\r\n\r\n                                const suggestions = latexEnvironments\r\n                                    .filter((env) => env.startsWith(partialEnv))\r\n                                    .map((env) => {\r\n                                        // If there's already a closing brace, we need to handle it carefully\r\n                                        let insertText, endColumn;\r\n                                        if (hasClosingBrace) {\r\n                                            // Include the environment content but skip past the existing closing brace\r\n                                            insertText = `${env}}\\n\\t$0\\n\\\\end{${env}}`;\r\n                                            endColumn = position.column + 1; // Replace up to and including the }\r\n                                        } else {\r\n                                            // No closing brace, add everything including the brace\r\n                                            insertText = `${env}}\\n\\t$0\\n\\\\end{${env}}`;\r\n                                            endColumn = position.column;\r\n                                        }\r\n\r\n                                        return {\r\n                                            label: env,\r\n                                            kind: monaco.languages\r\n                                                .CompletionItemKind.Keyword,\r\n                                            insertText: insertText,\r\n                                            insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\r\n                                            documentation: `Insert ${env} environment`,\r\n                                            range: {\r\n                                                startLineNumber:\r\n                                                    position.lineNumber,\r\n                                                startColumn: position.column - partialEnv.length,\r\n                                                endLineNumber: position.lineNumber,\r\n                                                endColumn: endColumn,\r\n                                            },\r\n                                        };\r\n                                    });\r\n                                return { suggestions };\r\n                            }\r\n\r\n                            return { suggestions: [] };\r\n                        },\r\n                    });\r\n\r\n                    // Auto-close \\begin{} with \\end{}\r\n                    monaco.languages.registerCompletionItemProvider(\"latex\", {\r\n                        triggerCharacters: [\"}\"],\r\n                        provideCompletionItems: (model, position) => {\r\n                            const lineContent = model.getLineContent(\r\n                                position.lineNumber,\r\n                            );\r\n                            const textBeforeCursor = lineContent.substring(\r\n                                0,\r\n                                position.column - 1,\r\n                            );\r\n                            const textAfterCursor = lineContent.substring(\r\n                                position.column - 1,\r\n                            );\r\n                            const beginMatch =\r\n                                textBeforeCursor.match(/\\\\begin\\{([^}]+)\\}$/);\r\n\r\n                            // Only suggest auto-close if there's not already an \\end{} on the same line\r\n                            // or if we haven't already inserted the environment completion\r\n                            if (beginMatch && !textAfterCursor.match(/^\\s*\\n\\s*\\\\end\\{/)) {\r\n                                const environmentName = beginMatch[1];\r\n\r\n                                // Check if this is one of our predefined environments\r\n                                // If so, don't auto-close as it was already handled by the environment completion\r\n                                if (latexEnvironments.includes(environmentName)) {\r\n                                    return { suggestions: [] };\r\n                                }\r\n\r\n                                return {\r\n                                    suggestions: [\r\n                                        {\r\n                                            label: `Auto-close \\\\end{${environmentName}}`,\r\n                                            kind: monaco.languages\r\n                                                .CompletionItemKind.Snippet,\r\n                                            insertText: `\\n\\t$0\\n\\\\end{${environmentName}}`,\r\n                                            insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\r\n                                            documentation: `Auto-close with \\\\end{${environmentName}}`,\r\n                                            range: {\r\n                                                startLineNumber:\r\n                                                    position.lineNumber,\r\n                                                startColumn: position.column,\r\n                                                endLineNumber:\r\n                                                    position.lineNumber,\r\n                                                endColumn: position.column,\r\n                                            },\r\n                                        },\r\n                                    ],\r\n                                };\r\n                            }\r\n\r\n                            return { suggestions: [] };\r\n                        },\r\n                    });\r\n\r\n                    // Create the editor\r\n                    monacoRef.current = monaco.editor.create(\r\n                        editorRef.current,\r\n                        {\r\n                            value: value,\r\n                            language: \"latex\",\r\n                            theme: \"underbranch-theme\",\r\n                            fontSize: 15,\r\n                            lineNumbers: \"on\",\r\n                            roundedSelection: true,\r\n                            scrollBeyondLastLine: false,\r\n                            automaticLayout: true,\r\n                            minimap: { enabled: false },\r\n                            wordWrap: \"on\",\r\n                            lineHeight: 24,\r\n                            padding: { top: 16, bottom: 16 },\r\n                            renderLineHighlight: \"all\",\r\n                            cursorBlinking: \"smooth\",\r\n                            cursorWidth: 2,\r\n                            fontFamily:\r\n                                \"'Fira Code', 'SF Mono', Consolas, 'Courier New', monospace\",\r\n                            fontLigatures: true,\r\n                            smoothScrolling: true,\r\n                            guides: {\r\n                                indentation: true,\r\n                                bracketPairs: true,\r\n                            },\r\n                        },\r\n                    );\r\n\r\n                    // Expose Monaco editor instance for collaborative features\r\n                    if (editorRef.current) {\r\n                        editorRef.current._monacoEditor = monacoRef.current;\r\n                    }\r\n\r\n                    // Listen for content changes\r\n                    monacoRef.current.onDidChangeModelContent(() => {\r\n                        const currentValue = monacoRef.current.getValue();\r\n                        if (onChange) {\r\n                            onChange(currentValue);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }\r\n\r\n        // Listen for clear editor event\r\n        const handleClearEditor = () => {\r\n            if (monacoRef.current) {\r\n                monacoRef.current.setValue(\"\");\r\n            }\r\n        };\r\n\r\n        window.addEventListener(\"clearEditor\", handleClearEditor);\r\n\r\n        return () => {\r\n            window.removeEventListener(\"clearEditor\", handleClearEditor);\r\n            if (monacoRef.current) {\r\n                monacoRef.current.dispose();\r\n                monacoRef.current = null;\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    // Update editor value when prop changes\r\n    useEffect(() => {\r\n        if (monacoRef.current && monacoRef.current.getValue() !== value) {\r\n            monacoRef.current.setValue(value);\r\n        }\r\n    }, [value]);\r\n\r\n    // Recalculate layout when editor becomes visible\r\n    useEffect(() => {\r\n        if (!monacoRef.current) return;\r\n\r\n        if (isVisible) {\r\n            if (layoutTimeout.current) clearTimeout(layoutTimeout.current);\r\n            layoutTimeout.current = setTimeout(() => {\r\n                try {\r\n                    monacoRef.current.layout();\r\n                } catch (e) {\r\n                    console.warn(\"monaco.layout failed\", e);\r\n                }\r\n            }, 50);\r\n        }\r\n\r\n        return () => {\r\n            if (layoutTimeout.current) {\r\n                clearTimeout(layoutTimeout.current);\r\n                layoutTimeout.current = null;\r\n            }\r\n        };\r\n    }, [isVisible]);\r\n\r\n    return React.createElement(\"div\", {\r\n        ref: editorRef,\r\n        id: \"monaco-editor\",\r\n    });\r\n};\r\n\r\nexport default LaTeXEditor;\r\n","const PreviewPane = ({ latexCode }) => {\r\n    const { useState, useEffect } = React;\r\n    const [processedContent, setProcessedContent] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    // Simple LaTeX to HTML converter for basic preview\r\n    const processLaTeX = (latex) => {\r\n        setIsLoading(true);\r\n\r\n        // Basic LaTeX processing - this is a simplified version\r\n        let html = latex;\r\n\r\n        // Document structure\r\n        html = html.replace(/\\\\documentclass\\{[^}]+\\}/, '');\r\n        html = html.replace(/\\\\usepackage(?:\\[[^\\]]*\\])?\\{[^}]+\\}/g, '');\r\n        html = html.replace(/\\\\title\\{([^}]+)\\}/, '<h1 class=\"title\">$1</h1>');\r\n        html = html.replace(/\\\\author\\{([^}]+)\\}/, '<p class=\"author\">By: $1</p>');\r\n        html = html.replace(/\\\\date\\{([^}]+)\\}/, '<p class=\"date\">$1</p>');\r\n        html = html.replace(/\\\\maketitle/, '<div class=\"titlepage\"></div>');\r\n\r\n        // Sections\r\n        html = html.replace(/\\\\section\\{([^}]+)\\}/g, '<h2>$1</h2>');\r\n        html = html.replace(/\\\\subsection\\{([^}]+)\\}/g, '<h3>$1</h3>');\r\n        html = html.replace(/\\\\subsubsection\\{([^}]+)\\}/g, '<h4>$1</h4>');\r\n\r\n        // Math environments\r\n        html = html.replace(/\\\\begin\\{equation\\}([\\s\\S]*?)\\\\end\\{equation\\}/g, '<div class=\"equation\">$$1$</div>');\r\n        html = html.replace(/\\$([^$]+)\\$/g, '<span class=\"math\">$1</span>');\r\n\r\n        // Lists\r\n        html = html.replace(/\\\\begin\\{itemize\\}([\\s\\S]*?)\\\\end\\{itemize\\}/g, (match, content) => {\r\n            const items = content.replace(/\\\\item\\s+/g, '<li>').split('<li>').filter(item => item.trim());\r\n            return '<ul>' + items.map(item => '<li>' + item.trim() + '</li>').join('') + '</ul>';\r\n        });\r\n\r\n        html = html.replace(/\\\\begin\\{enumerate\\}([\\s\\S]*?)\\\\end\\{enumerate\\}/g, (match, content) => {\r\n            const items = content.replace(/\\\\item\\s+/g, '<li>').split('<li>').filter(item => item.trim());\r\n            return '<ol>' + items.map(item => '<li>' + item.trim() + '</li>').join('') + '</ol>';\r\n        });\r\n\r\n        // Text formatting\r\n        html = html.replace(/\\\\textbf\\{([^}]+)\\}/g, '<strong>$1</strong>');\r\n        html = html.replace(/\\\\textit\\{([^}]+)\\}/g, '<em>$1</em>');\r\n        html = html.replace(/\\\\emph\\{([^}]+)\\}/g, '<em>$1</em>');\r\n\r\n        // Clean up LaTeX commands and environments\r\n        html = html.replace(/\\\\begin\\{document\\}/, '');\r\n        html = html.replace(/\\\\end\\{document\\}/, '');\r\n        html = html.replace(/\\\\[a-zA-Z]+(?:\\[[^\\]]*\\])?\\{[^}]*\\}/g, '');\r\n        html = html.replace(/\\\\[a-zA-Z]+/g, '');\r\n\r\n        // Convert line breaks\r\n        html = html.replace(/\\n\\s*\\n/g, '</p><p>');\r\n        html = '<p>' + html + '</p>';\r\n        html = html.replace(/<p>\\s*<\\/p>/g, '');\r\n\r\n        setProcessedContent(html);\r\n        setIsLoading(false);\r\n    };\r\n\r\n    useEffect(() => {\r\n        const timeoutId = setTimeout(() => {\r\n            processLaTeX(latexCode);\r\n        }, 500); // Debounce processing\r\n\r\n        return () => clearTimeout(timeoutId);\r\n    }, [latexCode]);\r\n\r\n    if (isLoading) {\r\n        return React.createElement('div', { className: 'loading' }, 'Processing LaTeX...');\r\n    }\r\n\r\n    return React.createElement('div', { className: 'preview-content' },\r\n        React.createElement('div', {\r\n            dangerouslySetInnerHTML: { __html: processedContent }\r\n        }),\r\n        React.createElement('style', null, `\r\n            .preview-content h1.title {\r\n                text-align: center;\r\n                margin-bottom: 10px;\r\n                font-size: 24px;\r\n            }\r\n            .preview-content .author, .preview-content .date {\r\n                text-align: center;\r\n                margin: 5px 0;\r\n                color: #666;\r\n            }\r\n            .preview-content h2 {\r\n                margin: 20px 0 10px 0;\r\n                color: #333;\r\n                border-bottom: 1px solid #ddd;\r\n                padding-bottom: 5px;\r\n            }\r\n            .preview-content h3 {\r\n                margin: 15px 0 8px 0;\r\n                color: #444;\r\n            }\r\n            .preview-content h4 {\r\n                margin: 12px 0 6px 0;\r\n                color: #555;\r\n            }\r\n            .preview-content p {\r\n                margin: 10px 0;\r\n                line-height: 1.6;\r\n            }\r\n            .preview-content .equation {\r\n                text-align: center;\r\n                margin: 20px 0;\r\n                padding: 10px;\r\n                background: #f8f9fa;\r\n                border-left: 4px solid #007bff;\r\n                font-family: 'Times New Roman', serif;\r\n                font-style: italic;\r\n            }\r\n            .preview-content .math {\r\n                font-family: 'Times New Roman', serif;\r\n                font-style: italic;\r\n                background: #f0f0f0;\r\n                padding: 2px 4px;\r\n                border-radius: 3px;\r\n            }\r\n            .preview-content ul, .preview-content ol {\r\n                margin: 10px 0 10px 20px;\r\n            }\r\n            .preview-content li {\r\n                margin: 5px 0;\r\n            }\r\n        `)\r\n    );\r\n};\r\n\r\nexport default PreviewPane;\r\n","const Toolbar = ({ viewMode, onViewModeChange, latexCode }) => {\r\n    const handleDownload = () => {\r\n        const blob = new Blob([latexCode], { type: 'text/plain' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = 'document.tex';\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    const handleClear = () => {\r\n        if (confirm('Are you sure you want to clear the editor?')) {\r\n            onViewModeChange('editor');\r\n            // This will be handled by the parent component\r\n            const event = new CustomEvent('clearEditor');\r\n            window.dispatchEvent(event);\r\n        }\r\n    };\r\n\r\n    // Debug helpers - log button clicks\r\n    const handleViewClick = (mode) => {\r\n        console.log('[Toolbar] button click ->', mode);\r\n        onViewModeChange(mode);\r\n    };\r\n\r\n    return React.createElement('div', { className: 'toolbar' },\r\n        React.createElement('h1', null, 'LaTeX Editor'),\r\n        React.createElement('div', { className: 'toolbar-buttons' },\r\n            React.createElement('button', {\r\n                className: `btn ${viewMode === 'editor' ? 'btn-primary' : 'btn-secondary'}`,\r\n                onClick: () => handleViewClick('editor')\r\n            }, 'Editor'),\r\n            React.createElement('button', {\r\n                className: `btn ${viewMode === 'split' ? 'btn-primary' : 'btn-secondary'}`,\r\n                onClick: () => handleViewClick('split')\r\n            }, 'Split'),\r\n            React.createElement('button', {\r\n                className: `btn ${viewMode === 'preview' ? 'btn-primary' : 'btn-secondary'}`,\r\n                onClick: () => handleViewClick('preview')\r\n            }, 'Preview'),\r\n            React.createElement('button', {\r\n                className: 'btn btn-secondary',\r\n                onClick: handleDownload\r\n            }, 'Download'),\r\n            React.createElement('button', {\r\n                className: 'btn btn-secondary',\r\n                onClick: handleClear\r\n            }, 'Clear')\r\n        )\r\n    );\r\n};\r\n\r\nexport default Toolbar;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import Toolbar from './Toolbar.js';\r\nimport LaTeXEditor from './LaTeXEditor.js';\r\nimport PreviewPane from './PreviewPane.js';\r\nimport App from './App.js';\r\n// Import Collaborative features (this also initializes collaboration automatically)\r\nimport './Collaborative.js';\r\n\r\n// Make components available globally for backward compatibility\r\nwindow.Toolbar = Toolbar;\r\nwindow.LaTeXEditor = LaTeXEditor;\r\nwindow.PreviewPane = PreviewPane;\r\nwindow.App = App;\r\n\r\n// Function to initialize the app\r\nconst initializeApp = () => {\r\n    try {\r\n        // Wait for React to be available\r\n        if (typeof React !== 'undefined' && typeof ReactDOM !== 'undefined') {\r\n            const root = ReactDOM.createRoot(document.getElementById('root'));\r\n            root.render(React.createElement(App));\r\n        } else {\r\n            console.error('React or ReactDOM not loaded');\r\n        }\r\n    } catch (error) {\r\n        console.error('Error loading app:', error);\r\n        document.getElementById('root').innerHTML = `\r\n            <div style=\"padding: 20px; text-align: center; color: red;\">\r\n                <h2>Error Loading Editor</h2>\r\n                <p>There was an error loading the LaTeX editor. Please check the console for details.</p>\r\n            </div>\r\n        `;\r\n    }\r\n};\r\n\r\n// Initialize when DOM is ready\r\nif (document.readyState === 'loading') {\r\n    document.addEventListener('DOMContentLoaded', initializeApp);\r\n} else {\r\n    initializeApp();\r\n}\r\n"],"names":["useState","useEffect","React","App","latexCode","setLatexCode","viewMode","setViewMode","handleCodeChange","value","console","log","document","title","e","window","dispatchEvent","Event","editorClass","previewClass","editorVisible","previewVisible","createElement","className","Toolbar","onViewModeChange","LaTeXEditor","onChange","isVisible","PreviewPane","Collaborative","constructor","socket","editor","app","users","currentUser","currentRoom","isUpdatingFromRemote","decorations","init","waitForSocketIO","initSocket","getUserInfo","waitForEditor","setupCollaboration","Promise","resolve","checkSocketIO","io","setTimeout","on","data","userId","handleRemoteUpdate","length","updateUsersList","handleCursorUpdate","roomId","updateDocumentContent","content","showMessage","isPasswordProtected","error","message","alert","promptForRoom","createRoom","confirm","password","prompt","joinRoom","exists","userName","localStorage","getItem","userColor","Date","now","setItem","getRandomColor","name","color","checkRoomExists","emit","userData","checkEditor","editorElement","getElementById","monaco","_monacoEditor","editors","getEditors","onDidChangeModelContent","getValue","changes","onDidChangeCursorPosition","lineNumber","position","column","getPosition","setValue","setPosition","oldDecorations","filter","d","deltaDecorations","map","id","decoration","range","Range","cursor","options","stickiness","TrackedRangeStickiness","NeverGrowsWhenTypingAtEdges","hoverMessage","user","after","inlineClassName","decorationIds","push","createUsersListUI","existingList","remove","usersList","style","cssText","roomInfo","roomTitle","textContent","switchButton","onclick","appendChild","forEach","userElement","colorDot","nameElement","body","colors","Math","floor","random","type","messageDiv","parentNode","removeChild","head","readyState","addEventListener","collaborative","useRef","editorRef","monacoRef","layoutTimeout","require","current","config","paths","vs","languages","register","defineTheme","base","inherit","rules","token","foreground","fontStyle","setMonarchTokensProvider","tokenizer","root","latexCommands","command","insertText","documentation","latexEnvironments","registerCompletionItemProvider","triggerCharacters","provideCompletionItems","model","lineContent","getLineContent","textBeforeCursor","substring","commandMatch","match","partialCommand","textAfterCursor","suggestions","cmd","startsWith","hasOpenBrace","hasClosingBrace","endColumn","includes","replace","label","kind","CompletionItemKind","Function","insertTextRules","CompletionItemInsertTextRule","InsertAsSnippet","startLineNumber","startColumn","endLineNumber","beginMatch","partialEnv","env","Keyword","environmentName","Snippet","create","language","theme","fontSize","lineNumbers","roundedSelection","scrollBeyondLastLine","automaticLayout","minimap","enabled","wordWrap","lineHeight","padding","top","bottom","renderLineHighlight","cursorBlinking","cursorWidth","fontFamily","fontLigatures","smoothScrolling","guides","indentation","bracketPairs","currentValue","handleClearEditor","removeEventListener","dispose","clearTimeout","layout","warn","ref","processedContent","setProcessedContent","isLoading","setIsLoading","processLaTeX","latex","html","items","split","item","trim","join","timeoutId","dangerouslySetInnerHTML","__html","handleDownload","blob","Blob","url","URL","createObjectURL","a","href","download","click","revokeObjectURL","handleClear","event","CustomEvent","handleViewClick","mode","onClick","initializeApp","ReactDOM","createRoot","render","innerHTML"],"sourceRoot":""}